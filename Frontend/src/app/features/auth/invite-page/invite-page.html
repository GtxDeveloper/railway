<div class="rounded-xl me-auto ms-auto max-w-250 space-y-6">

  @if (!isSuccess()) {
    <div class="text-center flex flex-col items-center justify-center">
      <h1 class="text-4xl text-white raleway font-bold">Pozvánka do tímu</h1>
      <p class="text-2xl text-white raleway font-medium mt-4 opacity-90">
        Vytvorte si účet a pripojte sa k reštaurácii
      </p>
    </div>
  }

  @if (isSuccess()) {
    <div class="text-center space-y-6 py-4 animate-fade-in">
      <div class="rounded-full flex items-center justify-center mx-auto">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" class="w-20 h-20">
          <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"/>
        </svg>
      </div>

      <div>
        <h2 class="raleway font-bold text-3xl text-white">Skontrolujte si email</h2>
        <p class="text-white font-medium text-2xl raleway mt-2">
          Odoslali sme e-mail s overovacím kódom na<br>
          <span class="font-semibold raleway text-[#ffc800]">{{submittedEmail()}}</span>
        </p>
      </div>

      <div class="pt-6 flex justify-center gap-3">
        @for (digit of digits; track i; let i = $index) {
          <input
            #otpInput
            type="text"
            inputmode="numeric"
            maxlength="1"
            [(ngModel)]="digits[i]"
            (input)="onInput(i, $event)"
            (keydown)="onKeyDown(i, $event)"
            (paste)="onPaste($event)"
            class="w-12 h-14 sm:w-14 sm:h-16 rounded-xl text-center text-3xl font-bold
                 text-gray-900 bg-white outline-none transition-all duration-200
                 focus:ring-4 focus:ring-[#ffc800]/50 focus:-translate-y-1 shadow-lg"
          >
        }
      </div>

      <button
        (click)="resetRegistration()"
        class="w-fit flex items-center gap-2 mx-auto raleway bg-[#ffc800] text-black font-bold text-xl rounded-full px-8 py-3 hover:bg-white hover:text-[#ffc800] transition ease-in"
      >
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
        </svg>

        {{ 'REGISTER.BUTTON_BACK' | translate }}
      </button>
    </div>
  } @else {
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4 flex flex-col gap-3">

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <app-ui-input
          [control]="getControl('name')"
          placeholder="Meno"
        ></app-ui-input>

        <app-ui-input
          [control]="getControl('surname')"
          placeholder="Priezvisko"
        ></app-ui-input>
      </div>

      <app-ui-input
        type="email"
        [control]="getControl('email')"
        placeholder="E-mail"
      ></app-ui-input>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <app-ui-input
          type="password"
          [control]="getControl('password')"
          placeholder="Heslo"
        ></app-ui-input>
        <app-ui-input
          type="password"
          [control]="getControl('repeatPassword')"
          placeholder="Zopakujte heslo"
        ></app-ui-input>
      </div>

      <button
        type="submit"
        [disabled]="form.invalid || isLoading()"
        class="me-auto ms-auto bg-[#ffc800] raleway font-bold text-4xl rounded-full px-15 py-7 hover:bg-white hover:text-[#ffc800] transition ease-in disabled:bg-gray-500 disabled:hover:text-black mt-4"
      >
        @if (isLoading()) {
          Spracovávam...
        } @else {
          Prijať pozvánku
        }
      </button>
    </form>

    <div class="text-center text-sm text-gray-600 pt-2">
      <a
        class="group flex text-white transition w-fit ease-in raleway text-xl me-auto ms-auto cursor-pointer"
        [routerLink]="['/login']"
      >
        Už máte účet?
        <span class="text-[#ffc800] ms-1.5 group-hover:underline transition ease-in">
          Prihláste sa.
        </span>
      </a>
    </div>
  }
</div>
